(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,t){},182:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(70),l=a.n(s),o=a(76),i=a(15),c=a(16),m=a(18),u=a(17),p=a(19),h=(a(82),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).canvasEle=null,a.ctx=null,a.colors=["red","blue","green","orange","yellow","purple","silver","olive","teal"],a.colorRGB=[[255,0,0],[0,0,255],[0,255,0],[255,165,0],[255,255,0],[128,0,128],[192,192,192],[128,128,0],[0,128,128]],a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.ctx=this.canvasEle.getContext("2d"),this.drawBoard()}},{key:"drawStones",value:function(){for(var e=0;e<this.props.moves.length;e++)for(var t=0;t<this.props.moves[e].length;t++){var a=this.props.moves[e][t][0],r=this.props.moves[e][t][1];this.ctx.beginPath(),console.log(a,r),this.ctx.arc(a,r,10,0,2*Math.PI,!1);var n=this.colors[e];this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.lineWidth=3,this.ctx.strokeStyle="#003300",this.ctx.stroke()}}},{key:"decompressBitmap",value:function(){for(var e=this.props.bitmap.split(" ").map(Number),t=[],a=0,r=0;;r+=3){for(var n=e[r];n<=e[r+1];n++)t.push(e[r+2]);if(999===e[r+1]&&1e3===(a+=1))break}return t}},{key:"drawBoard",value:function(){for(var e=this.decompressBitmap(),t=this.ctx.getImageData(0,0,this.props.width,this.props.height),a=t.data,r=0;r<1e3;r++)for(var n=0;n<1e3;n++){var s=4*(1e3*r+n),l=parseInt(e[s/4]);if(l>0){var o=this.colorRGB[l-1];a[s]=o[0],a[++s]=o[1],a[++s]=o[2],a[++s]=125}}console.log("data:",a),this.ctx.putImageData(t,0,0)}},{key:"render",value:function(){var e=this;return n.a.createElement("canvas",{height:this.props.height,width:this.props.width,ref:function(t){return e.canvasEle=t}})}}]),t}(n.a.Component)),v=a(72),y=a.n(v),_=a(74),f=a.n(_),d=a(5),k=a.n(d),E=a(73),g=a.n(E),b=a(35),w=a.n(b),O=a(21),j=a.n(O),x=function(e){function t(e){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.props.player_names?this.props.player_names.map(function(e,a){return n.a.createElement(w.a,{key:a,selected:t.props.current_player==a+1},n.a.createElement(k.a,null,a),n.a.createElement(k.a,null,e),n.a.createElement(k.a,null,t.props.player_scores[a]),n.a.createElement(k.a,null,t.props.player_times[a]))}):n.a.createElement(w.a,{key:-1},n.a.createElement(k.a,null),n.a.createElement(k.a,null),n.a.createElement(k.a,null),n.a.createElement(k.a,null)),n.a.createElement("div",null,n.a.createElement(j.a,{variant:"h4",gutterBottom:!0},"Players"),n.a.createElement(y.a,null,n.a.createElement(g.a,null,n.a.createElement(w.a,null,n.a.createElement(k.a,null,"#"),n.a.createElement(k.a,null,"Player Name"),n.a.createElement(k.a,null,"Current Score"),n.a.createElement(k.a,null,"Time Left"))),n.a.createElement(f.a,null,e)),n.a.createElement(j.a,{variant:"h4",gutterBottom:!0},"Current Move Time"),this.props.timeTaken)}}]),t}(n.a.Component),S=a(36),B=a.n(S),I=a(75),C=a.n(I),T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={reset:!1,initiated:!1,soft_reset:!1,game_over:!1,bitmap:"",move_col:-1,move_row:-1,num_players:0,current_player:-1,player_times:[],player_scores:[],moves:[],total_scores:[],last_scores:[],timeTaken:0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"resetBoard",value:function(){this.setState({initiated:!1,moves:[],total_scores:[],last_scores:[],game_over:!1})}},{key:"softReset",value:function(){this.setState({moves:[],game_over:!1})}},{key:"endGame",value:function(){clearInterval(this.clockInterval),this.setState({game_over:!0})}},{key:"init",value:function(e){var t=[],a=[],r=[];for(var n in e)t.push(0),a.push(0),r.push(120);console.log(e),this.setState({player_names:e,total_scores:t,player_scores:a,player_times:r,initiated:!0}),this.resetClock(!1)}},{key:"componentDidMount",value:function(){var e=this;this.socket=C()("http://localhost:10000"),this.socket.on("to_client",function(t){var a=JSON.parse(t);console.log(e.state),a.reset?e.resetBoard():e.state.initiated?a["soft-reset"]?e.softReset():a.game_over?e.endGame():(e.setState({current_player:a.current_player,player_scores:a.player_scores,player_times:a.player_times,bitmap:a.bitmap,moves:Object(o.a)(e.state.moves).concat([a.move_row,a.move_col]),move_col:a.move_col,move_row:a.move_row}),e.resetClock(!0)):e.init(a.player_names)})}},{key:"resetClock",value:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&clearInterval(this.clockInterval),this.clockStart=(new Date).getTime(),this.clockInterval=setInterval(function(){var t=(new Date).getTime()-e.clockStart;t/=1e3,e.setState({timeTaken:t.toFixed(2)})},100)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(j.a,{variant:"h2",gutterBottom:!0},"Gravitational Voronoi"),n.a.createElement(B.a,{container:!0,spacing:24},n.a.createElement(B.a,{item:!0,xs:2},n.a.createElement(x,{player_names:this.state.player_names,player_scores:this.state.player_scores,player_times:this.state.player_times,current_player:this.state.current_player,timeTaken:this.state.timeTaken})),n.a.createElement(B.a,{item:!0,xs:10},n.a.createElement(h,{height:600,width:600,bitmap:this.state.bitmap,moves:this.state.moves,num_players:this.state.num_players}))))}}]),t}(r.Component);l.a.render(n.a.createElement(T,null),document.getElementById("root"))},77:function(e,t,a){e.exports=a(182)},82:function(e,t,a){}},[[77,2,1]]]);
//# sourceMappingURL=main.13947ca1.chunk.js.map